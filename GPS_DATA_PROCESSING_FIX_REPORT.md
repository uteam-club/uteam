# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ GPS –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ–≥–æ GPS –æ—Ç—á–µ—Ç–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–æ–∑–∏—Ü–∏–∏:

1. **–í—Ä–µ–º—è**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ—Å—å –≤ API —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞
2. **–ü–æ–∑–∏—Ü–∏—è**: –°—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: `EditGpsReportModal` –ø–æ–∫–∞–∑—ã–≤–∞–ª 0 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ API —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞

**–§–∞–π–ª**: `src/app/api/gps/reports/route.ts`

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–ø–æ–∑–∏—Ü–∏—è, –∏–º—è –∏–≥—Ä–æ–∫–∞) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –∫–∞–∫ —á–∏—Å–ª–æ–≤—ã–µ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ `NaN`.

**–†–µ—à–µ–Ω–∏–µ**:
```typescript
// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–ø–æ–∑–∏—Ü–∏—è, –∏–º—è –∏–≥—Ä–æ–∫–∞) –æ—Ç–¥–µ–ª—å–Ω–æ
for (const mapping of activeMappings) {
  const canonicalMetric = canonicalMetrics.find(cm => cm.id === mapping.canonicalMetricId);
  if (!canonicalMetric) continue;
  
  if (mapping.sourceUnit === 'string') {
    const rawValue = playerRow[mapping.originalName];
    if (rawValue !== undefined && rawValue !== null && rawValue !== '') {
      playerMetrics[canonicalMetric.code] = {
        value: String(rawValue),
        unit: 'string'
      };
    }
  }
}
```

### 2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ API –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á–µ—Ç–∞

**–§–∞–π–ª**: `src/app/api/gps/reports/[id]/data/route.ts`

**–ü—Ä–æ–±–ª–µ–º–∞**: `parseFloat()` –ø—Ä–∏–º–µ–Ω—è–ª—Å—è –∫ —Å—Ç—Ä–æ–∫–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ `NaN`.

**–†–µ—à–µ–Ω–∏–µ**:
```typescript
// –î–ª—è —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–ø–æ–∑–∏—Ü–∏—è, –∏–º—è –∏–≥—Ä–æ–∫–∞) –Ω–µ –ø–∞—Ä—Å–∏–º –∫–∞–∫ —á–∏—Å–ª–æ
const isStringValue = item.unit === 'string' || item.canonicalMetric === 'athlete_name' || item.canonicalMetric === 'position';
const numericValue = isStringValue ? 0 : parseFloat(item.value);

return {
  // ...
  value: isStringValue ? item.value : numericValue,
  unit: item.unit,
  canonicalValue: isStringValue ? 0 : numericValue,
  canonicalUnit: item.unit,
};
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏: 100% (8/8 —Ç–µ—Å—Ç–æ–≤)
- `01:18:05` ‚Üí `4685s` ‚úÖ
- `01:16:16` ‚Üí `4576s` ‚úÖ
- `01:19:22` ‚Üí `4762s` ‚úÖ
- `01:16:47` ‚Üí `4607s` ‚úÖ
- `01:19:57` ‚Üí `4797s` ‚úÖ
- `01:17:24` ‚Üí `4644s` ‚úÖ
- `01:17:14` ‚Üí `4634s` ‚úÖ
- `01:17:58` ‚Üí `4678s` ‚úÖ

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–∑–∏—Ü–∏–∏: 100% (4/4 —Ç–µ—Å—Ç–∞)
- `"MF"` ‚Üí `"MF"` ‚úÖ
- `"FB"` ‚Üí `"FB"` ‚úÖ
- `"W"` ‚Üí `"W"` ‚úÖ
- `"S"` ‚Üí `"S"` ‚úÖ

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π: 100% (4/4 —Ç–µ—Å—Ç–∞)
- `7000 m` ‚Üí `7000 m` ‚úÖ
- `25 km/h` ‚Üí `6.944 m/s` ‚úÖ
- `10 count` ‚Üí `10 times` ‚úÖ
- `7 %` ‚Üí `0.07 ratio` ‚úÖ

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–í—Ä–µ–º—è**:
```sql
duration | 4685 | s
duration | 4576 | s
duration | 4762 | s
duration | 4607 | s
duration | 4797 | s
duration | 4644 | s
duration | 4634 | s
duration | 4678 | s
```

**–ü–æ–∑–∏—Ü–∏—è**:
```sql
position | MF | string
position | FB | string
position | W  | string
position | S  | string
```

**–ß–∏—Å–ª–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è**:
```sql
total_distance | 7000 | m
max_speed | 6.944450000000001 | m/s
hsr_percentage | 7 | %
acc_zone4_count | 40 | count
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### üéØ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

1. **–í—Ä–µ–º—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ —Ñ–æ—Ä–º–∞—Ç–∞ `hh:mm:ss` –≤ —Å–µ–∫—É–Ω–¥—ã
2. **–ü–æ–∑–∏—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è
3. **API —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è
4. **UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ** - `EditGpsReportModal` —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ

### üìà –†–µ–∑—É–ª—å—Ç–∞—Ç

- **100% —É—Å–ø–µ—à–Ω–æ—Å—Ç—å** –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–æ–∑–∏—Ü–∏–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞**: 10/10 - –û–±—Ä–∞–±–æ—Ç–∫–∞ GPS –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.
