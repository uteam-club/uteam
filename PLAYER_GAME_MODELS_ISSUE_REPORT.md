# –û—Ç—á–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–µ —Å –∏–≥—Ä–æ–≤—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ –∏–≥—Ä–æ–∫–æ–≤

## üîç –ü—Ä–æ–±–ª–µ–º–∞

–í –±–ª–æ–∫–µ "–ò–≥—Ä–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –∏–≥—Ä–æ–∫–æ–≤" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ GPS –æ—Ç—á–µ—Ç–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ —Ç–æ–ª—å–∫–æ —É –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç "–ò–≥—Ä–æ–≤–∞—è –º–æ–¥–µ–ª—å –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞".

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –õ–æ–≥–∏–∫–∞ API –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
**–§–∞–π–ª:** `src/app/api/gps/reports/[id]/player-models/route.ts`

API –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ –∏–∑ –æ—Ç—á–µ—Ç–∞
- ‚úÖ –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–≥—Ä–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `PlayerGameModel`
- ‚úÖ –§–æ—Ä–º–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
- ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `hasGameModel: !!gameModel`

### 2. –ü—Ä–æ–±–ª–µ–º–∞ –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö
**–ü—Ä–∏—á–∏–Ω–∞:** –£ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ `PlayerGameModel`.

### 3. –ò–≥—Ä–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
**API:** `/api/players/[playerId]/game-model` (POST –º–µ—Ç–æ–¥)
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏–≥—Ä–æ–≤—É—é –º–æ–¥–µ–ª—å –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∞—Ç—á–µ–π –∫–æ–º–∞–Ω–¥—ã
- –§–∏–ª—å—Ç—Ä—É–µ—Ç –º–∞—Ç—á–∏ –≥–¥–µ –∏–≥—Ä–æ–∫ –∏–≥—Ä–∞–ª 60+ –º–∏–Ω—É—Ç
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ç–∞–±–ª–∏—Ü—É `PlayerGameModel`

## üéØ –†–µ—à–µ–Ω–∏–µ

### 1. –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–≥—Ä–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
**–°–∫—Ä–∏–ø—Ç:** `calculate-all-game-models.cjs`

```bash
node calculate-all-game-models.cjs
```

### 2. –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∏–≥—Ä–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π
1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞—Ç—á–µ–π:** –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –º–∞—Ç—á–µ–π –∫–æ–º–∞–Ω–¥—ã –∏–≥—Ä–æ–∫–∞
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:** –¢–æ–ª—å–∫–æ –º–∞—Ç—á–∏ –≥–¥–µ –∏–≥—Ä–æ–∫ –∏–≥—Ä–∞–ª 60+ –º–∏–Ω—É—Ç
3. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:** –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∫ 90 –º–∏–Ω—É—Ç–∞–º
4. **–£—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –≤—Å–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–º –º–∞—Ç—á–∞–º
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:** –í —Ç–∞–±–ª–∏—Ü—É `PlayerGameModel`

### 3. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –º–æ–¥–µ–ª–∏
- –ú–∏–Ω–∏–º—É–º 1 –º–∞—Ç—á —Å 60+ –º–∏–Ω—É—Ç–∞–º–∏ –∏–≥—Ä—ã
- –ù–∞–ª–∏—á–∏–µ GPS –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–∞—Ç—á–∞
- –ê–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ PlayerGameModel
```sql
CREATE TABLE "PlayerGameModel" (
  "id" uuid PRIMARY KEY,
  "playerId" uuid NOT NULL,
  "clubId" uuid NOT NULL,
  "calculatedAt" timestamp NOT NULL,
  "matchesCount" integer NOT NULL,  -- –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ç—á–µ–π (–¥–æ 10)
  "totalMinutes" integer NOT NULL,  -- –æ–±—â–µ–µ –≤—Ä–µ–º—è –∏–≥—Ä—ã
  "metrics" jsonb NOT NULL,         -- –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∑–∞ 90 –º–∏–Ω—É—Ç
  "matchIds" jsonb NOT NULL,        -- ID –º–∞—Ç—á–µ–π –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
  "version" integer DEFAULT 1
);
```

### –¢–∞–±–ª–∏—Ü–∞ PlayerGameModelSettings
```sql
CREATE TABLE "PlayerGameModelSettings" (
  "id" uuid PRIMARY KEY,
  "playerId" uuid NOT NULL,
  "clubId" uuid NOT NULL,
  "selectedMetrics" jsonb NOT NULL,  -- –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  "metricUnits" jsonb NOT NULL       -- –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
);
```

## üîß –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è –∏–≥—Ä–æ–∫–∞ –ù–ï –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞—Å—á–µ—Ç
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `PlayerGameModelSettings` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –†–∞—Å—á–µ—Ç –∏–≥—Ä–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ 48 —É—Å—Ä–µ–¥–Ω—è–µ–º—ã—Ö –º–µ—Ç—Ä–∏–∫
- –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ GPS –æ—Ç—á–µ—Ç–æ–≤

### 2. –ò–≥—Ä–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ POST `/api/players/[playerId]/game-model`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### 3. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ GPS –æ—Ç—á–µ—Ç–∞—Ö
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
- –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å —Ç–µ–∫—É—â–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
- –ü—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –∏–≥—Ä—ã

## ‚úÖ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞—Å—á–µ—Ç –º–æ–¥–µ–ª–µ–π:** `node calculate-all-game-models.cjs`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –º–æ–¥–µ–ª–∏ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã
3. **–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É:** –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å GPS –æ—Ç—á–µ—Ç
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:** –í—Å–µ –∏–≥—Ä–æ–∫–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ

## üéâ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞ –∏–≥—Ä–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π:
- ‚úÖ –í—Å–µ –∏–≥—Ä–æ–∫–∏ —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–≤–æ–∏ –º–æ–¥–µ–ª–∏
- ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é
- ‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è –¥–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –º–∞—Ç—á–µ–π –∏ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –º–æ–¥–µ–ª–∏

**–î–∞—Ç–∞:** 22 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** üîß –¢–†–ï–ë–£–ï–¢–°–Ø –†–ê–°–ß–ï–¢ –ú–û–î–ï–õ–ï–ô
