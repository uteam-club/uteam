# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∏ –ø–æ—Ä—è–¥–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤ –º–æ–¥–∞–ª–∫–∞—Ö

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!

### üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ –ø–æ—Ä—è–¥–æ–∫ –º–µ—Ç—Ä–∏–∫** –≤ –º–æ–¥–∞–ª–∫–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –º–µ—Ç—Ä–∏–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

### üìä –ê–Ω–∞–ª–∏–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–µ—Ç—Ä–∏–∫ –≤ –ë–î

–ü—Ä–æ–≤–µ–¥–µ–Ω –∞–Ω–∞–ª–∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–µ—Ç—Ä–∏–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```
üìä –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Ç—Ä–∏–∫:
  - acc_dec: 14 –º–µ—Ç—Ä–∏–∫ (–£—Å–∫–æ—Ä–µ–Ω–∏—è –∏ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è)
  - derived: 1 –º–µ—Ç—Ä–∏–∫–∞ (–ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏)
  - distance: 1 –º–µ—Ç—Ä–∏–∫–∞ (–î–∏—Å—Ç–∞–Ω—Ü–∏—è)
  - heart: 2 –º–µ—Ç—Ä–∏–∫–∏ (–ü—É–ª—å—Å)
  - heart_zones: 6 –º–µ—Ç—Ä–∏–∫ (–ü—É–ª—å—Å–æ–≤—ã–µ –∑–æ–Ω—ã)
  - hsr_sprint: 4 –º–µ—Ç—Ä–∏–∫–∏ (HSR –∏ —Å–ø—Ä–∏–Ω—Ç—ã)
  - identity: 2 –º–µ—Ç—Ä–∏–∫–∏ (–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
  - intensity: 4 –º–µ—Ç—Ä–∏–∫–∏ (–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å)
  - load: 2 –º–µ—Ç—Ä–∏–∫–∏ (–ù–∞–≥—Ä—É–∑–∫–∞)
  - participation: 1 –º–µ—Ç—Ä–∏–∫–∞ (–£—á–∞—Å—Ç–∏–µ)
  - speed: 2 –º–µ—Ç—Ä–∏–∫–∏ (–°–∫–æ—Ä–æ—Å—Ç—å)
  - speed_zones: 18 –º–µ—Ç—Ä–∏–∫ (–°–∫–æ—Ä–æ—Å—Ç–Ω—ã–µ –∑–æ–Ω—ã)
```

### üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. –û–±–Ω–æ–≤–ª–µ–Ω API `/api/gps/canonical-metrics-for-mapping`

**–§–∞–π–ª:** `src/app/api/gps/canonical-metrics-for-mapping/route.ts`

**–û–±–Ω–æ–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:**
```javascript
const categoryOrder = [
  'identity',           // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–≥—Ä–æ–∫–∞
  'participation',      // –£—á–∞—Å—Ç–∏–µ –≤ –∏–≥—Ä–µ
  'distance',           // –î–∏—Å—Ç–∞–Ω—Ü–∏—è
  'speed',              // –°–∫–æ—Ä–æ—Å—Ç—å
  'speed_zones',        // –°–∫–æ—Ä–æ—Å—Ç–Ω—ã–µ –∑–æ–Ω—ã
  'hsr_sprint',         // HSR –∏ —Å–ø—Ä–∏–Ω—Ç—ã
  'acc_dec',            // –£—Å–∫–æ—Ä–µ–Ω–∏—è –∏ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è
  'load',               // –ù–∞–≥—Ä—É–∑–∫–∞
  'intensity',          // –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å
  'heart',              // –ü—É–ª—å—Å
  'heart_zones',        // –ü—É–ª—å—Å–æ–≤—ã–µ –∑–æ–Ω—ã
  'derived',            // –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  'other'               // –ü—Ä–æ—á–∏–µ
];
```

#### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–∞–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è

**–§–∞–π–ª:** `src/components/gps/NewGpsProfileModal.tsx`

**–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
```javascript
const categoryNames: Record<string, { ru: string; en: string }> = {
  'identity': { ru: '–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è', en: 'Identity' },
  'participation': { ru: '–£—á–∞—Å—Ç–∏–µ', en: 'Participation' },
  'distance': { ru: '–î–∏—Å—Ç–∞–Ω—Ü–∏—è', en: 'Distance' },
  'speed': { ru: '–°–∫–æ—Ä–æ—Å—Ç—å', en: 'Speed' },
  'speed_zones': { ru: '–ó–æ–Ω—ã —Å–∫–æ—Ä–æ—Å—Ç–∏', en: 'Speed Zones' },
  'hsr_sprint': { ru: '–í—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–π –±–µ–≥', en: 'High Speed Running' },
  'acc_dec': { ru: '–£—Å–∫–æ—Ä–µ–Ω–∏–µ –∏ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏–µ', en: 'Acceleration Deceleration' },
  'load': { ru: '–ù–∞–≥—Ä—É–∑–∫–∞', en: 'Load' },
  'intensity': { ru: '–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å', en: 'Intensity' },
  'heart': { ru: '–ü—É–ª—å—Å', en: 'Heart Rate' },
  'heart_zones': { ru: '–ó–æ–Ω—ã –ø—É–ª—å—Å–∞', en: 'Heart Rate Zones' },
  'derived': { ru: '–ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏', en: 'Derived Metrics' },
  'other': { ru: '–ü—Ä–æ—á–∏–µ', en: 'Other' }
};
```

**–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:**
```javascript
// –°–æ—Ä—Ç–∏—Ä—É–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
const categoryOrder = [
  'identity', 'participation', 'distance', 'speed', 'speed_zones', 
  'hsr_sprint', 'acc_dec', 'load', 'intensity', 'heart', 
  'heart_zones', 'derived', 'other'
];

const sortedGroupedMetrics = Object.keys(groupedMetrics)
  .sort((a, b) => {
    const aCategory = Object.keys(categoryNames).find(key => getCategoryName(key) === a);
    const bCategory = Object.keys(categoryNames).find(key => getCategoryName(key) === b);
    const aIndex = categoryOrder.indexOf(aCategory || 'other');
    const bIndex = categoryOrder.indexOf(bCategory || 'other');
    return aIndex - bIndex;
  })
  .reduce((acc, category) => {
    acc[category] = groupedMetrics[category];
    return acc;
  }, {} as Record<string, typeof metrics>);
```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–∞–ª–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è

**–§–∞–π–ª:** `src/components/gps/EditGpsProfileModal.tsx`

**–í–Ω–µ—Å–µ–Ω—ã –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ `categoryNames`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- –û–±–Ω–æ–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `sortedGroupedMetrics` –≤–º–µ—Å—Ç–æ `groupedMetrics`

### üìã –õ–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π

#### 1. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** (`identity`)
- –ò–º—è –∏–≥—Ä–æ–∫–∞, –ø–æ–∑–∏—Ü–∏—è

#### 2. **–£—á–∞—Å—Ç–∏–µ** (`participation`)
- –í—Ä–µ–º—è –∏–≥—Ä—ã

#### 3. **–î–∏—Å—Ç–∞–Ω—Ü–∏—è** (`distance`)
- –û–±—â–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è

#### 4. **–°–∫–æ—Ä–æ—Å—Ç—å** (`speed`)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å, —Å—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å

#### 5. **–°–∫–æ—Ä–æ—Å—Ç–Ω—ã–µ –∑–æ–Ω—ã** (`speed_zones`)
- –í—Ä–µ–º—è –≤ –∑–æ–Ω–∞—Ö —Å–∫–æ—Ä–æ—Å—Ç–∏, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥–æ–≤ –≤ –∑–æ–Ω—ã

#### 6. **HSR –∏ —Å–ø—Ä–∏–Ω—Ç—ã** (`hsr_sprint`)
- HSR –ø—Ä–æ—Ü–µ–Ω—Ç, –¥–∏—Å—Ç–∞–Ω—Ü–∏—è HSR, —Å–ø—Ä–∏–Ω—Ç—ã

#### 7. **–£—Å–∫–æ—Ä–µ–Ω–∏—è –∏ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏—è** (`acc_dec`)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–∫–æ—Ä–µ–Ω–∏–π –∏ —Ç–æ—Ä–º–æ–∂–µ–Ω–∏–π –ø–æ –∑–æ–Ω–∞–º

#### 8. **–ù–∞–≥—Ä—É–∑–∫–∞** (`load`)
- Player Load, Power Score

#### 9. **–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å** (`intensity`)
- Work Ratio, —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏

#### 10. **–ü—É–ª—å—Å** (`heart`)
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∏ —Å—Ä–µ–¥–Ω–∏–π –ø—É–ª—å—Å

#### 11. **–ü—É–ª—å—Å–æ–≤—ã–µ –∑–æ–Ω—ã** (`heart_zones`)
- –í—Ä–µ–º—è –≤ –ø—É–ª—å—Å–æ–≤—ã—Ö –∑–æ–Ω–∞—Ö

#### 12. **–ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏** (`derived`)
- –î–∏—Å—Ç–∞–Ω—Ü–∏—è –∑–∞ –º–∏–Ω—É—Ç—É –∏ –¥—Ä—É–≥–∏–µ –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

#### 13. **–ü—Ä–æ—á–∏–µ** (`other`)
- –õ—é–±—ã–µ –¥—Ä—É–≥–∏–µ –º–µ—Ç—Ä–∏–∫–∏

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ–ø–µ—Ä—å –≤ –º–æ–¥–∞–ª–∫–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏:**

‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** - –≤—Å–µ 12 –∫–∞—Ç–µ–≥–æ—Ä–∏–π –º–µ—Ç—Ä–∏–∫ –∏–∑ –ë–î  
‚úÖ **–õ–æ–≥–∏—á–µ—Å–∫–∏–π –ø–æ—Ä—è–¥–æ–∫** - –æ—Ç –±–∞–∑–æ–≤—ã—Ö –∫ —Å–ª–æ–∂–Ω—ã–º –º–µ—Ç—Ä–∏–∫–∞–º  
‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è** - –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–∞—Ö  
‚úÖ **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤ API –∏ UI  
‚úÖ **–ü–æ–ª–Ω–æ—Ç–∞** - –≤—Å–µ 57 –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫ –¥–æ—Å—Ç—É–ø–Ω—ã  

### üîÑ –í–ª–∏—è–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ `NewGpsProfileModal.tsx` - –º–æ–¥–∞–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ `EditGpsProfileModal.tsx` - –º–æ–¥–∞–ª–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ `/api/gps/canonical-metrics-for-mapping` - API –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞

**–ù–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã:**
- `/api/gps/canonical-metrics` - API –¥–ª—è —É—Å—Ä–µ–¥–Ω—è–µ–º—ã—Ö –º–µ—Ç—Ä–∏–∫ (48 –º–µ—Ç—Ä–∏–∫)
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ GPS –æ—Ç—á–µ—Ç–æ–≤
- –ò–≥—Ä–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –∏–≥—Ä–æ–∫–æ–≤

### üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!** –¢–µ–ø–µ—Ä—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ –ø–æ—Ä—è–¥–æ–∫ –º–µ—Ç—Ä–∏–∫ –≤ –º–æ–¥–∞–ª–∫–∞—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –∏ –ª–æ–≥–∏—á–µ—Å–∫–∏ —É–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–î–∞—Ç–∞:** 22 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û
