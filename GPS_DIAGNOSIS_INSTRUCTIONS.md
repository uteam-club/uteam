# üîç –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –æ—à–∏–±–∫–∏ 400 GPS –∑–∞–≥—Ä—É–∑–∫–∏

## üìã –®–∞–≥–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ**

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ browser-gps-diagnosis.js
```

### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞**

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Next.js
npm run dev

# –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ PM2
pm2 logs

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ production
tail -f /var/log/your-app.log
```

### 3. **–í–∫–ª—é—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

–ó–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `src/app/api/gps/reports/route.ts` –Ω–∞ –≤–µ—Ä—Å–∏—é –∏–∑ `gps-api-debug-version.ts`:

```bash
cp gps-api-debug-version.ts src/app/api/gps/reports/route.ts
```

### 4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ GPS**

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
const gpsModal = document.querySelector('[class*="gps"], [data-testid*="gps"]');
if (gpsModal) {
  console.log('GPS –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞–π–¥–µ–Ω–æ:', gpsModal);
} else {
  console.log('GPS –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º—ã
const forms = document.querySelectorAll('form');
forms.forEach((form, index) => {
  console.log(`–§–æ—Ä–º–∞ ${index + 1}:`, {
    action: form.action,
    method: form.method,
    elements: Array.from(form.elements).map(el => ({
      name: el.name,
      value: el.value,
      type: el.type
    }))
  });
});
```

### 5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã**

–í DevTools ‚Üí Network tab:
1. –û—á–∏—Å—Ç–∏—Ç–µ –ª–æ–≥–∏
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å GPS —Ñ–∞–π–ª
3. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/gps/reports`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - Request Headers
   - Request Payload (FormData)
   - Response

### 6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏
fetch('/api/auth/session')
  .then(r => r.json())
  .then(data => {
    console.log('–°–µ—Å—Å–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', data);
    console.log('Club ID:', data.user?.clubId);
    console.log('User ID:', data.user?.id);
  });
```

## üö® –ù–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏ 400

### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π**
- `teamId` - ID –∫–æ–º–∞–Ω–¥—ã
- `eventType` - —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è ('training' –∏–ª–∏ 'match')
- `eventId` - ID —Å–æ–±—ã—Ç–∏—è
- `parsedData` - —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ GPS –¥–∞–Ω–Ω—ã–µ
- `columnMappings` - –º–∞–ø–ø–∏–Ω–≥ –∫–æ–ª–æ–Ω–æ–∫
- `playerMappings` - –º–∞–ø–ø–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤

### 2. **–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON**
- `columnMappings` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º JSON
- `playerMappings` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º JSON
- `parsedData` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º JSON

### 3. **–ü—Ä–æ–±–ª–µ–º—ã —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –∏–≥—Ä–æ–∫–æ–≤**
- –ò–≥—Ä–æ–∫–∏ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–º–∞–Ω–¥–µ
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç `playerMappings`
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –º–∞–ø–ø–∏–Ω–≥–µ

### 4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –∫–æ–ª–æ–Ω–æ–∫**
- `columnMappings` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞–ø–ø–∏–Ω–≥–∏
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ `canonicalMetricId`

### 5. **–ü—Ä–æ–±–ª–µ–º—ã —Å GPS –¥–∞–Ω–Ω—ã–º–∏**
- `parsedData` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `headers` –∏–ª–∏ `rows`
- –î–∞–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω—ã
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏

## üîß –†–µ—à–µ–Ω–∏—è

### 1. **–î–æ–±–∞–≤—å—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**

–í `NewGpsReportModal.tsx`:

```javascript
const handleSubmit = async () => {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
  if (!selectedTeam || !selectedEventType || !selectedEvent) {
    console.error('–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
    return;
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ GPS –¥–∞–Ω–Ω—ã—Ö
  if (!parsedData || !parsedData.headers || !parsedData.rows) {
    console.error('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ GPS –¥–∞–Ω–Ω—ã–µ');
    return;
  }
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–ø–ø–∏–Ω–≥–æ–≤
  if (activeColumnMappings.length === 0) {
    console.error('–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞–ø–ø–∏–Ω–≥–æ–≤ –∫–æ–ª–æ–Ω–æ–∫');
    return;
  }
  
  if (Object.keys(selectedPlayerMappings).length === 0) {
    console.error('–ù–µ—Ç –º–∞–ø–ø–∏–Ω–≥–æ–≤ –∏–≥—Ä–æ–∫–æ–≤');
    return;
  }
  
  // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É...
};
```

### 2. **–î–æ–±–∞–≤—å—Ç–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**

```javascript
console.log('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:');
console.log('teamId:', selectedTeam);
console.log('eventType:', selectedEventType);
console.log('eventId:', selectedEvent);
console.log('columnMappings:', activeColumnMappings);
console.log('playerMappings:', playerMappingsArray);
console.log('parsedData:', parsedData);
```

### 3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ GPS –æ—Ç—á–µ—Ç–æ–≤ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–∞–Ω–¥—ã.

## üìû –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –í–∫–ª—é—á–∏—Ç–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É –≤–∞—Å –±—É–¥–µ—Ç –ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø—É—Ç–∏ –µ—ë —Ä–µ—à–µ–Ω–∏—è.
